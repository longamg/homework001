<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>Document</title>
	</head>
	<body></body>
	<script>
		console.log("script start");
		async function async1() {
			await async2();
			console.log("async1 end");
		}
		async function async2() {
			console.log("async2 end");
		}
		async1();

		setTimeout(function () {
			console.log("setTimeout");
		}, 0);

		new Promise((resolve) => {
			console.log("Promise");
			resolve();
		})
			.then(function () {
				console.log("promise1");
			})
			.then(function () {
				console.log("promise2");
			});

		console.log("script end");

		/*
        1. 首先执行    console.log('script start')
        2. 执行 async1() 的时候，马上执行了 async2函数：console.log('async2 end')
        3. 顺序执行 new Promise()中的同步函数：console.log('Promise')
        4. 最后执行  console.log('script end')。
        上面是同步执行的代码，然后看剩下的异步执行的代码：
        首先，setTimeout是 宏观任务，排除到最后，剩下微观任务：
        5. 然后根据先入先出的对列方式，先执行  await async2() 后面阻碍的函数  console.log('async1 end') 

        6. 执行promise的resolve函数

        也就是接下来的两个then： console.log('promise1') ----  console.log('promise2') ；

        7. 最后执行的是 setTimeout函数  console.log('setTimeout') ；

        综上所述，以上代码执行的顺序是：

        1.script start 2.async2 end 3.Promise 4.script end 5.async1 end 6.promise1 7.promise2 8.setTimeout
        */
	</script>
</html>
